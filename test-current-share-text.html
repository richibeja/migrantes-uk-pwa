<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ” Test - Texto Actual de Compartir</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a1a;
            color: white;
        }
        .container {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .text-output {
            background: #444;
            padding: 15px;
            border-radius: 8px;
            white-space: pre-line;
            font-size: 14px;
            line-height: 1.4;
            margin: 15px 0;
            border-left: 4px solid #FFD700;
        }
        .test-button {
            background: #FFD700;
            color: black;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin: 10px 5px;
        }
        .test-button:hover {
            background: #FFA500;
        }
        .language-toggle {
            background: #4A90E2;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” Test - Texto ACTUAL de Compartir</h1>
        <p>Verifica exactamente quÃ© texto estÃ¡ generando el sistema ahora mismo</p>
        
        <div>
            <button class="language-toggle" onclick="setLanguage('es')">ğŸ‡ªğŸ‡¸ EspaÃ±ol</button>
            <button class="language-toggle" onclick="setLanguage('en')">ğŸ‡ºğŸ‡¸ English</button>
            <span id="current-lang" style="color: #FFD700; margin-left: 15px;">Idioma actual: EspaÃ±ol</span>
        </div>
        
        <button class="test-button" onclick="generateCurrentShareText()">ğŸ¯ Generar Texto Actual</button>
        <button class="test-button" onclick="copyCurrentText()">ğŸ“‹ Copiar Texto</button>
        <button class="test-button" onclick="testWhatsApp()">ğŸ“± Probar WhatsApp</button>
    </div>
    
    <div class="container">
        <h3>ğŸ“ Texto Generado:</h3>
        <div class="text-output" id="share-text-output">
            Haz clic en "Generar Texto Actual" para ver el texto que estÃ¡ usando el sistema...
        </div>
    </div>
    
    <div class="container">
        <h3>ğŸ”§ InformaciÃ³n TÃ©cnica:</h3>
        <div id="tech-info"></div>
    </div>

    <script>
        let currentLanguage = 'es';
        let currentShareText = '';
        
        // FunciÃ³n que replica exactamente la del sistema
        function generateShareText(prediction, lottery, language = 'es') {
            const numbers = prediction.numbers.join(', ');
            const bonusNumbers = prediction.bonusNumbers ? ` + ${prediction.bonusNumbers.join(', ')}` : '';
            const confidence = Math.round(prediction.confidence * 100);
            const appUrl = 'https://gana-facil.vercel.app';
            
            if (language === 'es') {
                return `Â¡Hola! ğŸ‘‹\n\n` +
                       `Estoy usando una app increÃ­ble de IA que me estÃ¡ generando nÃºmeros de loterÃ­a con anÃ¡lisis matemÃ¡tico real. ` +
                       `Los resultados han sido sorprendentes.\n\n` +
                       `ğŸ¯ **${lottery} - PrÃ³ximo sorteo:**\n` +
                       `NÃºmeros: ${numbers}${bonusNumbers}\n` +
                       `Confianza del anÃ¡lisis: ${confidence}%\n\n` +
                       `ğŸ’° **Mi propuesta:**\n` +
                       `Te comparto estos nÃºmeros y si ganas algo, compartimos:\n` +
                       `â€¢ TÃº te quedas con el 85%\n` +
                       `â€¢ Yo 15% por compartir la predicciÃ³n\n` +
                       `â€¢ Â¡Ambos ganamos! ğŸ¤\n\n` +
                       `ğŸ¤– **Esta app es increÃ­ble** - analiza 200 sorteos histÃ³ricos, usa 6 algoritmos matemÃ¡ticos y APIs en tiempo real. ` +
                       `Yo juego mis nÃºmeros y tambiÃ©n los comparto porque tengo mÃ¡s chances de ganar.\n\n` +
                       `**TÃº no necesitas tenerla** - yo ya la tengo y me estÃ¡ dando resultados. ` +
                       `Solo te comparto los nÃºmeros y jugamos juntos. ğŸ€\n\n` +
                       `Â¿Te animas? Sin riesgo para ti.\n\n` +
                       `PD: Si algÃºn dÃ­a te interesa, la app es: ${appUrl}`;
            } else {
                return `Hello! ğŸ‘‹\n\n` +
                       `I'm using an incredible AI app that's generating lottery numbers with real mathematical analysis. ` +
                       `The results have been amazing.\n\n` +
                       `ğŸ¯ **${lottery} - Next draw:**\n` +
                       `Numbers: ${numbers}${bonusNumbers}\n` +
                       `Analysis confidence: ${confidence}%\n\n` +
                       `ğŸ’° **My proposal:**\n` +
                       `I'll share these numbers with you and if you win something, we share:\n` +
                       `â€¢ You keep 85%\n` +
                       `â€¢ I get 15% for sharing the prediction\n` +
                       `â€¢ We both win! ğŸ¤\n\n` +
                       `ğŸ¤– **This app is incredible** - it analyzes 200 historical draws, uses 6 mathematical algorithms and real-time APIs. ` +
                       `I play my numbers and also share them because I have more chances to win.\n\n` +
                       `**You don't need to have it** - I already have it and it's giving me results. ` +
                       `I just share the numbers and we play together. ğŸ€\n\n` +
                       `Want to try? No risk for you.\n\n` +
                       `PS: If you're ever interested, the app is: ${appUrl}`;
            }
        }
        
        function setLanguage(lang) {
            currentLanguage = lang;
            document.getElementById('current-lang').textContent = 
                `Idioma actual: ${lang === 'es' ? 'EspaÃ±ol' : 'English'}`;
            
            // Regenerar texto si ya hay uno
            if (currentShareText) {
                generateCurrentShareText();
            }
        }
        
        function generateCurrentShareText() {
            // PredicciÃ³n de ejemplo
            const prediction = {
                numbers: [17, 18, 31, 34, 55],
                bonusNumbers: [3],
                confidence: 0.85
            };
            
            const lottery = 'Powerball';
            
            // Generar el texto exacto que deberÃ­a usar el sistema
            currentShareText = generateShareText(prediction, lottery, currentLanguage);
            
            // Mostrar el texto
            document.getElementById('share-text-output').textContent = currentShareText;
            
            // Mostrar informaciÃ³n tÃ©cnica
            updateTechInfo(prediction, lottery);
        }
        
        function updateTechInfo(prediction, lottery) {
            const info = `
ğŸ“Š PredicciÃ³n de prueba:
â€¢ LoterÃ­a: ${lottery}
â€¢ NÃºmeros principales: ${prediction.numbers.join(', ')}
â€¢ NÃºmero bonus: ${prediction.bonusNumbers.join(', ')}
â€¢ Confianza: ${Math.round(prediction.confidence * 100)}%
â€¢ Idioma: ${currentLanguage}
â€¢ Fecha: ${new Date().toLocaleString()}

ğŸ”§ FunciÃ³n utilizada: generateShareText()
ğŸ“± Misma funciÃ³n que usa AnbelChat.tsx
âœ… Texto actualizado segÃºn cÃ³digo actual
            `;
            
            document.getElementById('tech-info').innerHTML = 
                `<div style="background: #333; padding: 15px; border-radius: 8px; white-space: pre-line; font-family: monospace; font-size: 12px;">${info}</div>`;
        }
        
        function copyCurrentText() {
            if (!currentShareText) {
                alert('Primero genera el texto');
                return;
            }
            
            navigator.clipboard.writeText(currentShareText).then(() => {
                alert('âœ… Texto copiado al portapapeles!');
            });
        }
        
        function testWhatsApp() {
            if (!currentShareText) {
                alert('Primero genera el texto');
                return;
            }
            
            const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(currentShareText)}`;
            window.open(whatsappUrl, '_blank');
        }
        
        // Auto-generar al cargar
        window.onload = function() {
            generateCurrentShareText();
        };
    </script>
</body>
</html>
